<!DOCTYPE html>
<html lang="de">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>WebSocket Test</title>
  </head>
  <body>
    <h1>WebSocket Test</h1>
    <div id="messages"></div>
    <script>
      // Verbindung zum WebSocket-Server herstellen
      const ws = new WebSocket("ws://localhost:3131");

      // Event-Handler Verbindung
      ws.onopen = () => {
        console.log("Verbindung geöffnet");
      };

      // Event-Handler für eingehende Nachrichten
      ws.onmessage = (event) => {
        const message = JSON.parse(event.data);
        console.log("Nachricht erhalten:", message);

        // Nachricht im DOM anzeigen
        const messagesDiv = document.getElementById("messages");
        const messageElement = document.createElement("div");
        messageElement.textContent = `Nachricht: ${message.message}, Position: (${message.position.x}, ${message.position.y}), Farbe: ${message.color}, Zeitstempel: ${message.timestamp}, Klickanzahl: ${message.clickCount}`;
        messagesDiv.appendChild(messageElement);
      };

      // Event-Handler für Verbindungsfehler
      ws.onerror = (error) => {
        console.error("WebSocket-Fehler:", error);
      };

      // Event-Handler für Verbindungsabbruch
      ws.onclose = () => {
        console.log("Verbindung geschlossen");
      };
    </script>
  </body>
</html>
